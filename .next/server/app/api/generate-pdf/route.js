"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-pdf/route";
exports.ids = ["app/api/generate-pdf/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-pdf%2Froute&page=%2Fapi%2Fgenerate-pdf%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-pdf%2Froute.ts&appDir=K%3A%5CinfathPlats%5CinfathPlats%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=K%3A%5CinfathPlats%5CinfathPlats&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-pdf%2Froute&page=%2Fapi%2Fgenerate-pdf%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-pdf%2Froute.ts&appDir=K%3A%5CinfathPlats%5CinfathPlats%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=K%3A%5CinfathPlats%5CinfathPlats&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var K_infathPlats_infathPlats_app_api_generate_pdf_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-pdf/route.ts */ \"(rsc)/./app/api/generate-pdf/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-pdf/route\",\n        pathname: \"/api/generate-pdf\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-pdf/route\"\n    },\n    resolvedPagePath: \"K:\\\\infathPlats\\\\infathPlats\\\\app\\\\api\\\\generate-pdf\\\\route.ts\",\n    nextConfigOutput,\n    userland: K_infathPlats_infathPlats_app_api_generate_pdf_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-pdf/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1wZGYlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlLXBkZiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdlbmVyYXRlLXBkZiUyRnJvdXRlLnRzJmFwcERpcj1LJTNBJTVDaW5mYXRoUGxhdHMlNUNpbmZhdGhQbGF0cyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9SyUzQSU1Q2luZmF0aFBsYXRzJTVDaW5mYXRoUGxhdHMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uYWZldGgtYm9hcmQtZ2VuZXJhdG9yLz8yNGMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIks6XFxcXGluZmF0aFBsYXRzXFxcXGluZmF0aFBsYXRzXFxcXGFwcFxcXFxhcGlcXFxcZ2VuZXJhdGUtcGRmXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1wZGYvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nZW5lcmF0ZS1wZGZcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dlbmVyYXRlLXBkZi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIks6XFxcXGluZmF0aFBsYXRzXFxcXGluZmF0aFBsYXRzXFxcXGFwcFxcXFxhcGlcXFxcZ2VuZXJhdGUtcGRmXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS1wZGYvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-pdf%2Froute&page=%2Fapi%2Fgenerate-pdf%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-pdf%2Froute.ts&appDir=K%3A%5CinfathPlats%5CinfathPlats%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=K%3A%5CinfathPlats%5CinfathPlats&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-pdf/route.ts":
/*!***************************************!*\
  !*** ./app/api/generate-pdf/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_pdf_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/pdf-generator */ \"(rsc)/./lib/pdf-generator.ts\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/validation */ \"(rsc)/./lib/validation.ts\");\n\n\n\nconst runtime = \"nodejs\";\n// Allow up to 60 s for large-board PDF generation\nconst maxDuration = 60;\nasync function POST(req) {\n    try {\n        // 1. Parse & validate body\n        const body = await req.json().catch(()=>null);\n        if (!body) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"طلب غير صالح (JSON غير صحيح)\"\n            }, {\n                status: 400\n            });\n        }\n        const parsed = _lib_validation__WEBPACK_IMPORTED_MODULE_2__.boardFormSchema.safeParse(body);\n        if (!parsed.success) {\n            const messages = parsed.error.issues.map((i)=>`${i.path.join(\".\")}: ${i.message}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"بيانات غير صالحة\",\n                details: messages\n            }, {\n                status: 422\n            });\n        }\n        const { templateId, formData, fontOverrides, images } = parsed.data;\n        // 2. Generate PDF (reads fonts/templates from filesystem)\n        const pdfBytes = await (0,_lib_pdf_generator__WEBPACK_IMPORTED_MODULE_1__.generateBoard)({\n            templateId,\n            formData,\n            fontOverrides: fontOverrides ?? undefined,\n            images: {\n                logo: images.logo,\n                qr: images.qr || undefined\n            }\n        });\n        // 3. Return PDF response\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(Buffer.from(pdfBytes), {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/pdf\",\n                \"Content-Disposition\": `attachment; filename=\"nafeth-board-${templateId}.pdf\"`,\n                \"Content-Length\": String(pdfBytes.byteLength)\n            }\n        });\n    } catch (err) {\n        console.error(\"[generate-pdf] Error:\", err);\n        const message = err instanceof Error ? err.message : \"خطأ غير متوقع في الخادم\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLXBkZi9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0Q7QUFDSjtBQUNEO0FBRTVDLE1BQU1HLFVBQVUsU0FBUztBQUNoQyxrREFBa0Q7QUFDM0MsTUFBTUMsY0FBYyxHQUFHO0FBRXZCLGVBQWVDLEtBQUtDLEdBQWdCO0lBQ3pDLElBQUk7UUFDRiwyQkFBMkI7UUFDM0IsTUFBTUMsT0FBTyxNQUFNRCxJQUFJRSxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFNO1FBRTFDLElBQUksQ0FBQ0YsTUFBTTtZQUNULE9BQU9QLHFEQUFZQSxDQUFDUSxJQUFJLENBQ3RCO2dCQUFFRSxPQUFPO1lBQStCLEdBQ3hDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxTQUFTViw0REFBZUEsQ0FBQ1csU0FBUyxDQUFDTjtRQUV6QyxJQUFJLENBQUNLLE9BQU9FLE9BQU8sRUFBRTtZQUNuQixNQUFNQyxXQUFXSCxPQUFPRixLQUFLLENBQUNNLE1BQU0sQ0FBQ0MsR0FBRyxDQUN0QyxDQUFDQyxJQUFNLENBQUMsRUFBRUEsRUFBRUMsSUFBSSxDQUFDQyxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUVGLEVBQUVHLE9BQU8sQ0FBQyxDQUFDO1lBRTVDLE9BQU9yQixxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtnQkFBRUUsT0FBTztnQkFBb0JZLFNBQVNQO1lBQVMsR0FDL0M7Z0JBQUVKLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU0sRUFBRVksVUFBVSxFQUFFQyxRQUFRLEVBQUVDLGFBQWEsRUFBRUMsTUFBTSxFQUFFLEdBQUdkLE9BQU9lLElBQUk7UUFFbkUsMERBQTBEO1FBQzFELE1BQU1DLFdBQVcsTUFBTTNCLGlFQUFhQSxDQUFDO1lBQ25Dc0I7WUFDQUM7WUFDQUMsZUFBZUEsaUJBQWlCSTtZQUNoQ0gsUUFBUTtnQkFDTkksTUFBTUosT0FBT0ksSUFBSTtnQkFDakJDLElBQUlMLE9BQU9LLEVBQUUsSUFBSUY7WUFDbkI7UUFDRjtRQUVBLHlCQUF5QjtRQUN6QixPQUFPLElBQUk3QixxREFBWUEsQ0FBQ2dDLE9BQU9DLElBQUksQ0FBQ0wsV0FBVztZQUM3Q2pCLFFBQVE7WUFDUnVCLFNBQVM7Z0JBQ1AsZ0JBQWdCO2dCQUNoQix1QkFBdUIsQ0FBQyxtQ0FBbUMsRUFBRVgsV0FBVyxLQUFLLENBQUM7Z0JBQzlFLGtCQUFrQlksT0FBT1AsU0FBU1EsVUFBVTtZQUM5QztRQUNGO0lBQ0YsRUFBRSxPQUFPQyxLQUFLO1FBQ1pDLFFBQVE1QixLQUFLLENBQUMseUJBQXlCMkI7UUFFdkMsTUFBTWhCLFVBQ0pnQixlQUFlRSxRQUFRRixJQUFJaEIsT0FBTyxHQUFHO1FBRXZDLE9BQU9yQixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQUVFLE9BQU9XO1FBQVEsR0FBRztZQUFFVixRQUFRO1FBQUk7SUFDN0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25hZmV0aC1ib2FyZC1nZW5lcmF0b3IvLi9hcHAvYXBpL2dlbmVyYXRlLXBkZi9yb3V0ZS50cz82ZDRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGdlbmVyYXRlQm9hcmQgfSBmcm9tICdAL2xpYi9wZGYtZ2VuZXJhdG9yJztcclxuaW1wb3J0IHsgYm9hcmRGb3JtU2NoZW1hIH0gZnJvbSAnQC9saWIvdmFsaWRhdGlvbic7XHJcblxyXG5leHBvcnQgY29uc3QgcnVudGltZSA9ICdub2RlanMnO1xyXG4vLyBBbGxvdyB1cCB0byA2MCBzIGZvciBsYXJnZS1ib2FyZCBQREYgZ2VuZXJhdGlvblxyXG5leHBvcnQgY29uc3QgbWF4RHVyYXRpb24gPSA2MDtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gMS4gUGFyc2UgJiB2YWxpZGF0ZSBib2R5XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKS5jYXRjaCgoKSA9PiBudWxsKTtcclxuXHJcbiAgICBpZiAoIWJvZHkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICfYt9mE2Kgg2LrZitixINi12KfZhNitIChKU09OINi62YrYsSDYtdit2YrYrSknIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFyc2VkID0gYm9hcmRGb3JtU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcclxuXHJcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcGFyc2VkLmVycm9yLmlzc3Vlcy5tYXAoXHJcbiAgICAgICAgKGkpID0+IGAke2kucGF0aC5qb2luKCcuJyl9OiAke2kubWVzc2FnZX1gXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAn2KjZitin2YbYp9iqINi62YrYsSDYtdin2YTYrdipJywgZGV0YWlsczogbWVzc2FnZXMgfSxcclxuICAgICAgICB7IHN0YXR1czogNDIyIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IHRlbXBsYXRlSWQsIGZvcm1EYXRhLCBmb250T3ZlcnJpZGVzLCBpbWFnZXMgfSA9IHBhcnNlZC5kYXRhO1xyXG5cclxuICAgIC8vIDIuIEdlbmVyYXRlIFBERiAocmVhZHMgZm9udHMvdGVtcGxhdGVzIGZyb20gZmlsZXN5c3RlbSlcclxuICAgIGNvbnN0IHBkZkJ5dGVzID0gYXdhaXQgZ2VuZXJhdGVCb2FyZCh7XHJcbiAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgIGZvcm1EYXRhLFxyXG4gICAgICBmb250T3ZlcnJpZGVzOiBmb250T3ZlcnJpZGVzID8/IHVuZGVmaW5lZCxcclxuICAgICAgaW1hZ2VzOiB7XHJcbiAgICAgICAgbG9nbzogaW1hZ2VzLmxvZ28sXHJcbiAgICAgICAgcXI6IGltYWdlcy5xciB8fCB1bmRlZmluZWQsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyAzLiBSZXR1cm4gUERGIHJlc3BvbnNlXHJcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShCdWZmZXIuZnJvbShwZGZCeXRlcyksIHtcclxuICAgICAgc3RhdHVzOiAyMDAsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3BkZicsXHJcbiAgICAgICAgJ0NvbnRlbnQtRGlzcG9zaXRpb24nOiBgYXR0YWNobWVudDsgZmlsZW5hbWU9XCJuYWZldGgtYm9hcmQtJHt0ZW1wbGF0ZUlkfS5wZGZcImAsXHJcbiAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogU3RyaW5nKHBkZkJ5dGVzLmJ5dGVMZW5ndGgpLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbZ2VuZXJhdGUtcGRmXSBFcnJvcjonLCBlcnIpO1xyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPVxyXG4gICAgICBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ9iu2LfYoyDYutmK2LEg2YXYqtmI2YLYuSDZgdmKINin2YTYrtin2K/ZhSc7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IG1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdlbmVyYXRlQm9hcmQiLCJib2FyZEZvcm1TY2hlbWEiLCJydW50aW1lIiwibWF4RHVyYXRpb24iLCJQT1NUIiwicmVxIiwiYm9keSIsImpzb24iLCJjYXRjaCIsImVycm9yIiwic3RhdHVzIiwicGFyc2VkIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsIm1lc3NhZ2VzIiwiaXNzdWVzIiwibWFwIiwiaSIsInBhdGgiLCJqb2luIiwibWVzc2FnZSIsImRldGFpbHMiLCJ0ZW1wbGF0ZUlkIiwiZm9ybURhdGEiLCJmb250T3ZlcnJpZGVzIiwiaW1hZ2VzIiwiZGF0YSIsInBkZkJ5dGVzIiwidW5kZWZpbmVkIiwibG9nbyIsInFyIiwiQnVmZmVyIiwiZnJvbSIsImhlYWRlcnMiLCJTdHJpbmciLCJieXRlTGVuZ3RoIiwiZXJyIiwiY29uc29sZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-pdf/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pdf-generator.ts":
/*!******************************!*\
  !*** ./lib/pdf-generator.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TEMPLATE_FILES: () => (/* binding */ TEMPLATE_FILES),\n/* harmony export */   generateBoard: () => (/* binding */ generateBoard),\n/* harmony export */   inspectTemplateFields: () => (/* binding */ inspectTemplateFields)\n/* harmony export */ });\n/* harmony import */ var pdf_lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdf-lib */ \"(rsc)/./node_modules/pdf-lib/es/index.js\");\n/* harmony import */ var _pdf_lib_fontkit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pdf-lib/fontkit */ \"(rsc)/./node_modules/@pdf-lib/fontkit/dist/fontkit.es.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ \"(rsc)/./lib/types.ts\");\n\n\n\n// ─── Font Paths ──────────────────────────────────────────────────────\nconst FONT_PATHS = {\n    \"LamaSans-Medium\": \"/fonts/LamaSans-Medium.ttf\",\n    \"RuaqArabic-Medium\": \"/fonts/RuaqArabic-Medium.ttf\"\n};\n// ─── Asset Loading ───────────────────────────────────────────────────\n/**\r\n * Load a file from /public as ArrayBuffer.\r\n * Uses Node fs in API routes, falls back to fetch otherwise.\r\n */ async function loadAssetBytes(publicPath) {\n    // Node.js environment (API routes)\n    if (typeof process !== \"undefined\") {\n        try {\n            const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n            const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n            const filePath = path.join(process.cwd(), \"public\", publicPath);\n            const buffer = fs.readFileSync(filePath);\n            return buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength);\n        } catch  {\n        // Fall through to fetch\n        }\n    }\n    // Fetch fallback\n    const res = await fetch(publicPath);\n    if (!res.ok) {\n        throw new Error(`Failed to load asset: ${publicPath} (${res.status})`);\n    }\n    return res.arrayBuffer();\n}\n/**\r\n * Decode a base64 string (with or without data-URI prefix) to Uint8Array.\r\n */ function base64ToUint8Array(b64) {\n    const raw = b64.includes(\",\") ? b64.split(\",\")[1] : b64;\n    const binary = atob(raw);\n    const bytes = new Uint8Array(binary.length);\n    for(let i = 0; i < binary.length; i++){\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n}\n/**\r\n * Returns true if the base64 data represents a JPEG image.\r\n */ function isJpeg(b64) {\n    return b64.startsWith(\"data:image/jpeg\") || b64.startsWith(\"data:image/jpg\") || b64.startsWith(\"/9j/\");\n}\n// ─── Font Loading ────────────────────────────────────────────────────\n/**\r\n * Embed all Arabic fonts referenced by the schema into the PDF document.\r\n * Returns a FontCache keyed by family name.\r\n */ async function loadFonts(pdfDoc) {\n    pdfDoc.registerFontkit(_pdf_lib_fontkit__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n    const cache = {};\n    const families = new Set();\n    for (const field of _types__WEBPACK_IMPORTED_MODULE_2__.FIELD_SCHEMA.text_fields){\n        families.add(field.font.family);\n    }\n    for (const family of families){\n        const fontPath = FONT_PATHS[family];\n        if (!fontPath) {\n            console.warn(`[pdf-generator] No font file mapped for \"${family}\"`);\n            continue;\n        }\n        try {\n            const fontBytes = await loadAssetBytes(fontPath);\n            const embedded = await pdfDoc.embedFont(fontBytes, {\n                subset: false\n            });\n            cache[family] = embedded;\n        } catch (err) {\n            console.error(`[pdf-generator] Failed to embed font \"${family}\":`, err);\n            throw new Error(`Font loading failed for \"${family}\". Ensure public${fontPath} exists.`);\n        }\n    }\n    return cache;\n}\n// ─── Text Field Filling ──────────────────────────────────────────────\n/**\r\n * Safely retrieve a text field from the PDF form.\r\n * Returns null (with a warning) if the field doesn't exist.\r\n */ function getTextField(form, name) {\n    try {\n        return form.getTextField(name);\n    } catch  {\n        console.warn(`[pdf-generator] Text field \"${name}\" not found in PDF form.`);\n        return null;\n    }\n}\n/**\r\n * Check if text contains both Arabic characters and digits (mixed BiDi).\r\n */ function isMixedBidi(text) {\n    const hasArabic = /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/.test(text);\n    const hasDigits = /[0-9\\u0660-\\u0669]/.test(text);\n    return hasArabic && hasDigits;\n}\n/**\r\n * Pre-reverse number/date/time segments in mixed Arabic+number text.\r\n *\r\n * WHY: pdf-lib internally reverses the entire string when rendering\r\n * with an Arabic (RTL) font. Arabic characters survive this because\r\n * fontkit applies contextual shaping. But numbers also get reversed\r\n * (e.g., \"30/3/2026\" becomes \"6202/3/03\").\r\n *\r\n * FIX: By pre-reversing the number segments, the double reversal\r\n * (our reversal + pdf-lib's reversal) produces the correct LTR order.\r\n *\r\n * Example: \"السبت 30/3/2026\"\r\n *   → pre-reverse numbers: \"السبت 6202/3/03\"\r\n *   → pdf-lib reverses all: \"30/3/2026 تبسلا\"\r\n *   → font shapes Arabic:  shows \"30/3/2026 السبت\" ✓\r\n */ function preReverseNumberSegments(text) {\n    // Match digit groups with separators (: / - .)\n    // The regex captures the number+separator sequence\n    return text.replace(/([0-9\\u0660-\\u0669][0-9\\u0660-\\u0669:\\/\\-. ]*[0-9\\u0660-\\u0669]|[0-9\\u0660-\\u0669])/g, (match)=>{\n        const trimmed = match.trim();\n        return trimmed.split(\"\").reverse().join(\"\");\n    });\n}\n/**\r\n * Fill every text field in the PDF form.\r\n *\r\n * Strategy:\r\n * - Use defaultUpdateAppearances(font) to build AP with the embedded\r\n *   Arabic font. This ensures fontkit applies Arabic shaping (connected\r\n *   letters, ligatures) and the appearance is baked into the PDF.\r\n * - For mixed BiDi fields (Arabic + numbers), pre-reverse the number\r\n *   segments to compensate for pdf-lib's internal string reversal.\r\n * - NO NeedAppearances flag needed → image button APs are preserved.\r\n */ function fillTextFields(form, formData, fontCache) {\n    for (const fieldSpec of _types__WEBPACK_IMPORTED_MODULE_2__.FIELD_SCHEMA.text_fields){\n        const rawValue = formData[fieldSpec.name];\n        if (rawValue === undefined || rawValue === null || rawValue === \"\") continue;\n        const pdfField = getTextField(form, fieldSpec.name);\n        if (!pdfField) continue;\n        // Center-align text in the field\n        pdfField.setAlignment(pdf_lib__WEBPACK_IMPORTED_MODULE_0__.TextAlignment.Center);\n        // For mixed Arabic + numbers: pre-reverse number segments\n        // so they survive pdf-lib's internal RTL reversal\n        const value = isMixedBidi(rawValue) ? preReverseNumberSegments(rawValue) : rawValue;\n        // Set text value\n        pdfField.setText(value);\n        // Phone field: override font size to 808pt\n        if (fieldSpec.name === \"phone\") {\n            pdfField.setFontSize(808);\n        }\n        // Build appearance with embedded Arabic font.\n        // fontkit handles Arabic shaping (connected letters).\n        // The pre-reversed numbers will be re-reversed by pdf-lib,\n        // resulting in correct LTR digit order in the output.\n        const font = fontCache[fieldSpec.font.family];\n        if (font) {\n            pdfField.defaultUpdateAppearances(font);\n        }\n    }\n}\n// ─── Image Field Filling ─────────────────────────────────────────────\n/**\r\n * Fill an image field (PDF button) with an embedded image.\r\n *\r\n * In PDF forms, image fields are represented as push-button fields.\r\n * We embed the image into the document and set it as the button icon.\r\n */ async function fillImageField(pdfDoc, form, fieldName, imageBase64) {\n    if (!imageBase64) return;\n    let button;\n    try {\n        button = form.getButton(fieldName);\n    } catch  {\n        console.warn(`[pdf-generator] Button/image field \"${fieldName}\" not found in PDF form.`);\n        return;\n    }\n    const imageBytes = base64ToUint8Array(imageBase64);\n    const image = isJpeg(imageBase64) ? await pdfDoc.embedJpg(imageBytes) : await pdfDoc.embedPng(imageBytes);\n    button.setImage(image);\n}\n// ─── Main Entry Point ────────────────────────────────────────────────\n/**\r\n * Available template files in /public/templates/.\r\n * Index 0 = templateId 1, etc.\r\n */ const TEMPLATE_FILES = [\n    \"Art_board_2\\xd74.pdf\"\n];\n/**\r\n * Generate a filled PDF board.\r\n *\r\n * 1. Load the selected template PDF (contains interactive form fields)\r\n * 2. Embed Arabic fonts via fontkit\r\n * 3. Get the PDF form with pdfDoc.getForm()\r\n * 4. Fill text fields with form.getTextField(name).setText(value)\r\n * 5. Fill image fields with form.getButton(name).setImage(image)\r\n * 6. Flatten the form so fields are baked into the output\r\n * 7. Return the final PDF as Uint8Array\r\n */ async function generateBoard(options) {\n    const { templateId, formData, fontOverrides, images } = options;\n    // ── Validate template ID ───────────────────────────────\n    if (templateId < 1 || templateId > TEMPLATE_FILES.length) {\n        throw new Error(`Invalid templateId \"${templateId}\". Must be 1–${TEMPLATE_FILES.length}.`);\n    }\n    // ── 1. Load template ──────────────────────────────────\n    const templatePath = `/templates/${TEMPLATE_FILES[templateId - 1]}`;\n    let templateBytes;\n    try {\n        templateBytes = await loadAssetBytes(templatePath);\n    } catch  {\n        throw new Error(`Failed to load template ${templateId}. Ensure public${templatePath} exists.`);\n    }\n    const pdfDoc = await pdf_lib__WEBPACK_IMPORTED_MODULE_0__.PDFDocument.load(templateBytes);\n    // ── 2. Embed Arabic fonts ─────────────────────────────\n    const fontCache = await loadFonts(pdfDoc);\n    // ── 3. Access PDF form ────────────────────────────────\n    const form = pdfDoc.getForm();\n    // ── 4. Fill text fields (with font + centering) ───────\n    fillTextFields(form, formData, fontCache);\n    // ── 5. Fill image fields ──────────────────────────────\n    //    setImage() creates AP streams for button fields.\n    //    No NeedAppearances flag is set, so the viewer will NOT\n    //    regenerate/overwrite these image appearances.\n    if (images.logo) {\n        await fillImageField(pdfDoc, form, \"Company_logo\", images.logo);\n    }\n    if (images.qr) {\n        await fillImageField(pdfDoc, form, \"QRcode\", images.qr);\n    }\n    // ── 6. Serialize ──────────────────────────────────────\n    //    Text appearances: built by defaultUpdateAppearances(font)\n    //    Image appearances: built by setImage()\n    //    No viewer regeneration needed — everything is baked in.\n    return pdfDoc.save({\n        updateFieldAppearances: false\n    });\n}\n// ─── Debug Utility ───────────────────────────────────────────────────\n/**\r\n * Inspect a template and return every form field name + type.\r\n * Useful during development to verify field names match the schema.\r\n */ async function inspectTemplateFields(templateId) {\n    const templateBytes = await loadAssetBytes(`/templates/template_${templateId}.pdf`);\n    const pdfDoc = await pdf_lib__WEBPACK_IMPORTED_MODULE_0__.PDFDocument.load(templateBytes);\n    const form = pdfDoc.getForm();\n    return form.getFields().map((f)=>({\n            name: f.getName(),\n            type: f.constructor.name\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUNNLGVBQWVDLHNCQUNwQlgsVUFBa0I7SUFFbEIsTUFBTUksZ0JBQWdCLE1BQU1qRyxlQUMxQixDQUFDLG9CQUFvQixFQUFFNkYsV0FBVyxJQUFJLENBQUM7SUFFekMsTUFBTTNELFNBQVMsTUFBTXZDLGdEQUFXQSxDQUFDdUcsSUFBSSxDQUFDRDtJQUN0QyxNQUFNM0MsT0FBT3BCLE9BQU9pRSxPQUFPO0lBRTNCLE9BQU83QyxLQUFLbUQsU0FBUyxHQUFHQyxHQUFHLENBQUMsQ0FBQ0MsSUFBTztZQUNsQ3BELE1BQU1vRCxFQUFFQyxPQUFPO1lBQ2ZDLE1BQU1GLEVBQUVHLFdBQVcsQ0FBQ3ZELElBQUk7UUFDMUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25hZmV0aC1ib2FyZC1nZW5lcmF0b3IvLi9saWIvcGRmLWdlbmVyYXRvci50cz9hZTk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBERkRvY3VtZW50LCBQREZGb250LCBQREZGb3JtLCBQREZUZXh0RmllbGQsIFBERkJ1dHRvbiwgUERGTmFtZSwgVGV4dEFsaWdubWVudCB9IGZyb20gJ3BkZi1saWInO1xyXG5pbXBvcnQgZm9udGtpdCBmcm9tICdAcGRmLWxpYi9mb250a2l0JztcclxuaW1wb3J0IHtcclxuICBGSUVMRF9TQ0hFTUEsXHJcbiAgQUxMT1dFRF9GT05UX09WRVJSSURFUyxcclxuICB0eXBlIEJvYXJkRm9ybURhdGEsXHJcbiAgdHlwZSBGb250T3ZlcnJpZGUsXHJcbiAgdHlwZSBCb2FyZEltYWdlcyxcclxuICB0eXBlIEZvbnRDYWNoZSxcclxuICB0eXBlIEZvbnRGYW1pbHksXHJcbiAgdHlwZSBUZXh0RmllbGROYW1lLFxyXG59IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLy8g4pSA4pSA4pSAIEZvbnQgUGF0aHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG5jb25zdCBGT05UX1BBVEhTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICdMYW1hU2Fucy1NZWRpdW0nOiAnL2ZvbnRzL0xhbWFTYW5zLU1lZGl1bS50dGYnLFxyXG4gICdSdWFxQXJhYmljLU1lZGl1bSc6ICcvZm9udHMvUnVhcUFyYWJpYy1NZWRpdW0udHRmJyxcclxufTtcclxuXHJcbi8vIOKUgOKUgOKUgCBBc3NldCBMb2FkaW5nIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLyoqXHJcbiAqIExvYWQgYSBmaWxlIGZyb20gL3B1YmxpYyBhcyBBcnJheUJ1ZmZlci5cclxuICogVXNlcyBOb2RlIGZzIGluIEFQSSByb3V0ZXMsIGZhbGxzIGJhY2sgdG8gZmV0Y2ggb3RoZXJ3aXNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbG9hZEFzc2V0Qnl0ZXMocHVibGljUGF0aDogc3RyaW5nKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xyXG4gIC8vIE5vZGUuanMgZW52aXJvbm1lbnQgKEFQSSByb3V0ZXMpXHJcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGF0aCA9IGF3YWl0IGltcG9ydCgncGF0aCcpO1xyXG4gICAgICBjb25zdCBmcyA9IGF3YWl0IGltcG9ydCgnZnMnKTtcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsIHB1YmxpY1BhdGgpO1xyXG4gICAgICBjb25zdCBidWZmZXIgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgpO1xyXG4gICAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlci5zbGljZShcclxuICAgICAgICBidWZmZXIuYnl0ZU9mZnNldCxcclxuICAgICAgICBidWZmZXIuYnl0ZU9mZnNldCArIGJ1ZmZlci5ieXRlTGVuZ3RoXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIGZldGNoXHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIEZldGNoIGZhbGxiYWNrXHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gocHVibGljUGF0aCk7XHJcbiAgaWYgKCFyZXMub2spIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgYXNzZXQ6ICR7cHVibGljUGF0aH0gKCR7cmVzLnN0YXR1c30pYCk7XHJcbiAgfVxyXG4gIHJldHVybiByZXMuYXJyYXlCdWZmZXIoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlY29kZSBhIGJhc2U2NCBzdHJpbmcgKHdpdGggb3Igd2l0aG91dCBkYXRhLVVSSSBwcmVmaXgpIHRvIFVpbnQ4QXJyYXkuXHJcbiAqL1xyXG5mdW5jdGlvbiBiYXNlNjRUb1VpbnQ4QXJyYXkoYjY0OiBzdHJpbmcpOiBVaW50OEFycmF5IHtcclxuICBjb25zdCByYXcgPSBiNjQuaW5jbHVkZXMoJywnKSA/IGI2NC5zcGxpdCgnLCcpWzFdIDogYjY0O1xyXG4gIGNvbnN0IGJpbmFyeSA9IGF0b2IocmF3KTtcclxuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJpbmFyeS5sZW5ndGgpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBieXRlc1tpXSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkpO1xyXG4gIH1cclxuICByZXR1cm4gYnl0ZXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhc2U2NCBkYXRhIHJlcHJlc2VudHMgYSBKUEVHIGltYWdlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNKcGVnKGI2NDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIChcclxuICAgIGI2NC5zdGFydHNXaXRoKCdkYXRhOmltYWdlL2pwZWcnKSB8fFxyXG4gICAgYjY0LnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvanBnJykgfHxcclxuICAgIGI2NC5zdGFydHNXaXRoKCcvOWovJylcclxuICApO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgRm9udCBMb2FkaW5nIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLyoqXHJcbiAqIEVtYmVkIGFsbCBBcmFiaWMgZm9udHMgcmVmZXJlbmNlZCBieSB0aGUgc2NoZW1hIGludG8gdGhlIFBERiBkb2N1bWVudC5cclxuICogUmV0dXJucyBhIEZvbnRDYWNoZSBrZXllZCBieSBmYW1pbHkgbmFtZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRGb250cyhwZGZEb2M6IFBERkRvY3VtZW50KTogUHJvbWlzZTxGb250Q2FjaGU+IHtcclxuICBwZGZEb2MucmVnaXN0ZXJGb250a2l0KGZvbnRraXQpO1xyXG5cclxuICBjb25zdCBjYWNoZTogRm9udENhY2hlID0ge307XHJcbiAgY29uc3QgZmFtaWxpZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHJcbiAgZm9yIChjb25zdCBmaWVsZCBvZiBGSUVMRF9TQ0hFTUEudGV4dF9maWVsZHMpIHtcclxuICAgIGZhbWlsaWVzLmFkZChmaWVsZC5mb250LmZhbWlseSk7XHJcbiAgfVxyXG5cclxuICBmb3IgKGNvbnN0IGZhbWlseSBvZiBmYW1pbGllcykge1xyXG4gICAgY29uc3QgZm9udFBhdGggPSBGT05UX1BBVEhTW2ZhbWlseV07XHJcbiAgICBpZiAoIWZvbnRQYXRoKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgW3BkZi1nZW5lcmF0b3JdIE5vIGZvbnQgZmlsZSBtYXBwZWQgZm9yIFwiJHtmYW1pbHl9XCJgKTtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBmb250Qnl0ZXMgPSBhd2FpdCBsb2FkQXNzZXRCeXRlcyhmb250UGF0aCk7XHJcbiAgICAgIGNvbnN0IGVtYmVkZGVkID0gYXdhaXQgcGRmRG9jLmVtYmVkRm9udChmb250Qnl0ZXMsIHsgc3Vic2V0OiBmYWxzZSB9KTtcclxuICAgICAgY2FjaGVbZmFtaWx5IGFzIEZvbnRGYW1pbHldID0gZW1iZWRkZWQ7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgW3BkZi1nZW5lcmF0b3JdIEZhaWxlZCB0byBlbWJlZCBmb250IFwiJHtmYW1pbHl9XCI6YCwgZXJyKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb250IGxvYWRpbmcgZmFpbGVkIGZvciBcIiR7ZmFtaWx5fVwiLiBFbnN1cmUgcHVibGljJHtmb250UGF0aH0gZXhpc3RzLmApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhY2hlO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgVGV4dCBGaWVsZCBGaWxsaW5nIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLyoqXHJcbiAqIFNhZmVseSByZXRyaWV2ZSBhIHRleHQgZmllbGQgZnJvbSB0aGUgUERGIGZvcm0uXHJcbiAqIFJldHVybnMgbnVsbCAod2l0aCBhIHdhcm5pbmcpIGlmIHRoZSBmaWVsZCBkb2Vzbid0IGV4aXN0LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VGV4dEZpZWxkKGZvcm06IFBERkZvcm0sIG5hbWU6IHN0cmluZyk6IFBERlRleHRGaWVsZCB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gZm9ybS5nZXRUZXh0RmllbGQobmFtZSk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICBjb25zb2xlLndhcm4oYFtwZGYtZ2VuZXJhdG9yXSBUZXh0IGZpZWxkIFwiJHtuYW1lfVwiIG5vdCBmb3VuZCBpbiBQREYgZm9ybS5gKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHRleHQgY29udGFpbnMgYm90aCBBcmFiaWMgY2hhcmFjdGVycyBhbmQgZGlnaXRzIChtaXhlZCBCaURpKS5cclxuICovXHJcbmZ1bmN0aW9uIGlzTWl4ZWRCaWRpKHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGhhc0FyYWJpYyA9IC9bXFx1MDYwMC1cXHUwNkZGXFx1MDc1MC1cXHUwNzdGXFx1MDhBMC1cXHUwOEZGXFx1RkI1MC1cXHVGREZGXFx1RkU3MC1cXHVGRUZGXS8udGVzdCh0ZXh0KTtcclxuICBjb25zdCBoYXNEaWdpdHMgPSAvWzAtOVxcdTA2NjAtXFx1MDY2OV0vLnRlc3QodGV4dCk7XHJcbiAgcmV0dXJuIGhhc0FyYWJpYyAmJiBoYXNEaWdpdHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmUtcmV2ZXJzZSBudW1iZXIvZGF0ZS90aW1lIHNlZ21lbnRzIGluIG1peGVkIEFyYWJpYytudW1iZXIgdGV4dC5cclxuICpcclxuICogV0hZOiBwZGYtbGliIGludGVybmFsbHkgcmV2ZXJzZXMgdGhlIGVudGlyZSBzdHJpbmcgd2hlbiByZW5kZXJpbmdcclxuICogd2l0aCBhbiBBcmFiaWMgKFJUTCkgZm9udC4gQXJhYmljIGNoYXJhY3RlcnMgc3Vydml2ZSB0aGlzIGJlY2F1c2VcclxuICogZm9udGtpdCBhcHBsaWVzIGNvbnRleHR1YWwgc2hhcGluZy4gQnV0IG51bWJlcnMgYWxzbyBnZXQgcmV2ZXJzZWRcclxuICogKGUuZy4sIFwiMzAvMy8yMDI2XCIgYmVjb21lcyBcIjYyMDIvMy8wM1wiKS5cclxuICpcclxuICogRklYOiBCeSBwcmUtcmV2ZXJzaW5nIHRoZSBudW1iZXIgc2VnbWVudHMsIHRoZSBkb3VibGUgcmV2ZXJzYWxcclxuICogKG91ciByZXZlcnNhbCArIHBkZi1saWIncyByZXZlcnNhbCkgcHJvZHVjZXMgdGhlIGNvcnJlY3QgTFRSIG9yZGVyLlxyXG4gKlxyXG4gKiBFeGFtcGxlOiBcItin2YTYs9io2KogMzAvMy8yMDI2XCJcclxuICogICDihpIgcHJlLXJldmVyc2UgbnVtYmVyczogXCLYp9mE2LPYqNiqIDYyMDIvMy8wM1wiXHJcbiAqICAg4oaSIHBkZi1saWIgcmV2ZXJzZXMgYWxsOiBcIjMwLzMvMjAyNiDYqtio2LPZhNinXCJcclxuICogICDihpIgZm9udCBzaGFwZXMgQXJhYmljOiAgc2hvd3MgXCIzMC8zLzIwMjYg2KfZhNiz2KjYqlwiIOKck1xyXG4gKi9cclxuZnVuY3Rpb24gcHJlUmV2ZXJzZU51bWJlclNlZ21lbnRzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgLy8gTWF0Y2ggZGlnaXQgZ3JvdXBzIHdpdGggc2VwYXJhdG9ycyAoOiAvIC0gLilcclxuICAvLyBUaGUgcmVnZXggY2FwdHVyZXMgdGhlIG51bWJlcitzZXBhcmF0b3Igc2VxdWVuY2VcclxuICByZXR1cm4gdGV4dC5yZXBsYWNlKFxyXG4gICAgLyhbMC05XFx1MDY2MC1cXHUwNjY5XVswLTlcXHUwNjYwLVxcdTA2Njk6XFwvXFwtLiBdKlswLTlcXHUwNjYwLVxcdTA2NjldfFswLTlcXHUwNjYwLVxcdTA2NjldKS9nLFxyXG4gICAgKG1hdGNoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRyaW1tZWQgPSBtYXRjaC50cmltKCk7XHJcbiAgICAgIHJldHVybiB0cmltbWVkLnNwbGl0KCcnKS5yZXZlcnNlKCkuam9pbignJyk7XHJcbiAgICB9XHJcbiAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbGwgZXZlcnkgdGV4dCBmaWVsZCBpbiB0aGUgUERGIGZvcm0uXHJcbiAqXHJcbiAqIFN0cmF0ZWd5OlxyXG4gKiAtIFVzZSBkZWZhdWx0VXBkYXRlQXBwZWFyYW5jZXMoZm9udCkgdG8gYnVpbGQgQVAgd2l0aCB0aGUgZW1iZWRkZWRcclxuICogICBBcmFiaWMgZm9udC4gVGhpcyBlbnN1cmVzIGZvbnRraXQgYXBwbGllcyBBcmFiaWMgc2hhcGluZyAoY29ubmVjdGVkXHJcbiAqICAgbGV0dGVycywgbGlnYXR1cmVzKSBhbmQgdGhlIGFwcGVhcmFuY2UgaXMgYmFrZWQgaW50byB0aGUgUERGLlxyXG4gKiAtIEZvciBtaXhlZCBCaURpIGZpZWxkcyAoQXJhYmljICsgbnVtYmVycyksIHByZS1yZXZlcnNlIHRoZSBudW1iZXJcclxuICogICBzZWdtZW50cyB0byBjb21wZW5zYXRlIGZvciBwZGYtbGliJ3MgaW50ZXJuYWwgc3RyaW5nIHJldmVyc2FsLlxyXG4gKiAtIE5PIE5lZWRBcHBlYXJhbmNlcyBmbGFnIG5lZWRlZCDihpIgaW1hZ2UgYnV0dG9uIEFQcyBhcmUgcHJlc2VydmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gZmlsbFRleHRGaWVsZHMoXHJcbiAgZm9ybTogUERGRm9ybSxcclxuICBmb3JtRGF0YTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPixcclxuICBmb250Q2FjaGU6IEZvbnRDYWNoZVxyXG4pOiB2b2lkIHtcclxuICBmb3IgKGNvbnN0IGZpZWxkU3BlYyBvZiBGSUVMRF9TQ0hFTUEudGV4dF9maWVsZHMpIHtcclxuICAgIGNvbnN0IHJhd1ZhbHVlID0gZm9ybURhdGFbZmllbGRTcGVjLm5hbWUgYXMgVGV4dEZpZWxkTmFtZV07XHJcbiAgICBpZiAocmF3VmFsdWUgPT09IHVuZGVmaW5lZCB8fCByYXdWYWx1ZSA9PT0gbnVsbCB8fCByYXdWYWx1ZSA9PT0gJycpIGNvbnRpbnVlO1xyXG5cclxuICAgIGNvbnN0IHBkZkZpZWxkID0gZ2V0VGV4dEZpZWxkKGZvcm0sIGZpZWxkU3BlYy5uYW1lKTtcclxuICAgIGlmICghcGRmRmllbGQpIGNvbnRpbnVlO1xyXG5cclxuICAgIC8vIENlbnRlci1hbGlnbiB0ZXh0IGluIHRoZSBmaWVsZFxyXG4gICAgcGRmRmllbGQuc2V0QWxpZ25tZW50KFRleHRBbGlnbm1lbnQuQ2VudGVyKTtcclxuXHJcbiAgICAvLyBGb3IgbWl4ZWQgQXJhYmljICsgbnVtYmVyczogcHJlLXJldmVyc2UgbnVtYmVyIHNlZ21lbnRzXHJcbiAgICAvLyBzbyB0aGV5IHN1cnZpdmUgcGRmLWxpYidzIGludGVybmFsIFJUTCByZXZlcnNhbFxyXG4gICAgY29uc3QgdmFsdWUgPSBpc01peGVkQmlkaShyYXdWYWx1ZSlcclxuICAgICAgPyBwcmVSZXZlcnNlTnVtYmVyU2VnbWVudHMocmF3VmFsdWUpXHJcbiAgICAgIDogcmF3VmFsdWU7XHJcblxyXG4gICAgLy8gU2V0IHRleHQgdmFsdWVcclxuICAgIHBkZkZpZWxkLnNldFRleHQodmFsdWUpO1xyXG5cclxuICAgIC8vIFBob25lIGZpZWxkOiBvdmVycmlkZSBmb250IHNpemUgdG8gODA4cHRcclxuICAgIGlmIChmaWVsZFNwZWMubmFtZSA9PT0gJ3Bob25lJykge1xyXG4gICAgICBwZGZGaWVsZC5zZXRGb250U2l6ZSg4MDgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJ1aWxkIGFwcGVhcmFuY2Ugd2l0aCBlbWJlZGRlZCBBcmFiaWMgZm9udC5cclxuICAgIC8vIGZvbnRraXQgaGFuZGxlcyBBcmFiaWMgc2hhcGluZyAoY29ubmVjdGVkIGxldHRlcnMpLlxyXG4gICAgLy8gVGhlIHByZS1yZXZlcnNlZCBudW1iZXJzIHdpbGwgYmUgcmUtcmV2ZXJzZWQgYnkgcGRmLWxpYixcclxuICAgIC8vIHJlc3VsdGluZyBpbiBjb3JyZWN0IExUUiBkaWdpdCBvcmRlciBpbiB0aGUgb3V0cHV0LlxyXG4gICAgY29uc3QgZm9udCA9IGZvbnRDYWNoZVtmaWVsZFNwZWMuZm9udC5mYW1pbHkgYXMgRm9udEZhbWlseV07XHJcbiAgICBpZiAoZm9udCkge1xyXG4gICAgICBwZGZGaWVsZC5kZWZhdWx0VXBkYXRlQXBwZWFyYW5jZXMoZm9udCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyDilIDilIDilIAgSW1hZ2UgRmllbGQgRmlsbGluZyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbi8qKlxyXG4gKiBGaWxsIGFuIGltYWdlIGZpZWxkIChQREYgYnV0dG9uKSB3aXRoIGFuIGVtYmVkZGVkIGltYWdlLlxyXG4gKlxyXG4gKiBJbiBQREYgZm9ybXMsIGltYWdlIGZpZWxkcyBhcmUgcmVwcmVzZW50ZWQgYXMgcHVzaC1idXR0b24gZmllbGRzLlxyXG4gKiBXZSBlbWJlZCB0aGUgaW1hZ2UgaW50byB0aGUgZG9jdW1lbnQgYW5kIHNldCBpdCBhcyB0aGUgYnV0dG9uIGljb24uXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmaWxsSW1hZ2VGaWVsZChcclxuICBwZGZEb2M6IFBERkRvY3VtZW50LFxyXG4gIGZvcm06IFBERkZvcm0sXHJcbiAgZmllbGROYW1lOiBzdHJpbmcsXHJcbiAgaW1hZ2VCYXNlNjQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBpZiAoIWltYWdlQmFzZTY0KSByZXR1cm47XHJcblxyXG4gIGxldCBidXR0b246IFBERkJ1dHRvbjtcclxuICB0cnkge1xyXG4gICAgYnV0dG9uID0gZm9ybS5nZXRCdXR0b24oZmllbGROYW1lKTtcclxuICB9IGNhdGNoIHtcclxuICAgIGNvbnNvbGUud2FybihgW3BkZi1nZW5lcmF0b3JdIEJ1dHRvbi9pbWFnZSBmaWVsZCBcIiR7ZmllbGROYW1lfVwiIG5vdCBmb3VuZCBpbiBQREYgZm9ybS5gKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IGltYWdlQnl0ZXMgPSBiYXNlNjRUb1VpbnQ4QXJyYXkoaW1hZ2VCYXNlNjQpO1xyXG5cclxuICBjb25zdCBpbWFnZSA9IGlzSnBlZyhpbWFnZUJhc2U2NClcclxuICAgID8gYXdhaXQgcGRmRG9jLmVtYmVkSnBnKGltYWdlQnl0ZXMpXHJcbiAgICA6IGF3YWl0IHBkZkRvYy5lbWJlZFBuZyhpbWFnZUJ5dGVzKTtcclxuXHJcbiAgYnV0dG9uLnNldEltYWdlKGltYWdlKTtcclxufVxyXG5cclxuLy8g4pSA4pSA4pSAIE1haW4gRW50cnkgUG9pbnQg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4vKipcclxuICogQXZhaWxhYmxlIHRlbXBsYXRlIGZpbGVzIGluIC9wdWJsaWMvdGVtcGxhdGVzLy5cclxuICogSW5kZXggMCA9IHRlbXBsYXRlSWQgMSwgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFRFTVBMQVRFX0ZJTEVTID0gW1xyXG4gICdBcnRfYm9hcmRfMsOXNC5wZGYnLFxyXG5dIGFzIGNvbnN0O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0ZUJvYXJkT3B0aW9ucyB7XHJcbiAgdGVtcGxhdGVJZDogbnVtYmVyO1xyXG4gIGZvcm1EYXRhOiBCb2FyZEZvcm1EYXRhO1xyXG4gIGZvbnRPdmVycmlkZXM/OiBGb250T3ZlcnJpZGU7XHJcbiAgaW1hZ2VzOiBCb2FyZEltYWdlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIGEgZmlsbGVkIFBERiBib2FyZC5cclxuICpcclxuICogMS4gTG9hZCB0aGUgc2VsZWN0ZWQgdGVtcGxhdGUgUERGIChjb250YWlucyBpbnRlcmFjdGl2ZSBmb3JtIGZpZWxkcylcclxuICogMi4gRW1iZWQgQXJhYmljIGZvbnRzIHZpYSBmb250a2l0XHJcbiAqIDMuIEdldCB0aGUgUERGIGZvcm0gd2l0aCBwZGZEb2MuZ2V0Rm9ybSgpXHJcbiAqIDQuIEZpbGwgdGV4dCBmaWVsZHMgd2l0aCBmb3JtLmdldFRleHRGaWVsZChuYW1lKS5zZXRUZXh0KHZhbHVlKVxyXG4gKiA1LiBGaWxsIGltYWdlIGZpZWxkcyB3aXRoIGZvcm0uZ2V0QnV0dG9uKG5hbWUpLnNldEltYWdlKGltYWdlKVxyXG4gKiA2LiBGbGF0dGVuIHRoZSBmb3JtIHNvIGZpZWxkcyBhcmUgYmFrZWQgaW50byB0aGUgb3V0cHV0XHJcbiAqIDcuIFJldHVybiB0aGUgZmluYWwgUERGIGFzIFVpbnQ4QXJyYXlcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUJvYXJkKFxyXG4gIG9wdGlvbnM6IEdlbmVyYXRlQm9hcmRPcHRpb25zXHJcbik6IFByb21pc2U8VWludDhBcnJheT4ge1xyXG4gIGNvbnN0IHsgdGVtcGxhdGVJZCwgZm9ybURhdGEsIGZvbnRPdmVycmlkZXMsIGltYWdlcyB9ID0gb3B0aW9ucztcclxuXHJcbiAgLy8g4pSA4pSAIFZhbGlkYXRlIHRlbXBsYXRlIElEIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIGlmICh0ZW1wbGF0ZUlkIDwgMSB8fCB0ZW1wbGF0ZUlkID4gVEVNUExBVEVfRklMRVMubGVuZ3RoKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGVtcGxhdGVJZCBcIiR7dGVtcGxhdGVJZH1cIi4gTXVzdCBiZSAx4oCTJHtURU1QTEFURV9GSUxFUy5sZW5ndGh9LmApO1xyXG4gIH1cclxuXHJcbiAgLy8g4pSA4pSAIDEuIExvYWQgdGVtcGxhdGUg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgY29uc3QgdGVtcGxhdGVQYXRoID0gYC90ZW1wbGF0ZXMvJHtURU1QTEFURV9GSUxFU1t0ZW1wbGF0ZUlkIC0gMV19YDtcclxuICBsZXQgdGVtcGxhdGVCeXRlczogQXJyYXlCdWZmZXI7XHJcbiAgdHJ5IHtcclxuICAgIHRlbXBsYXRlQnl0ZXMgPSBhd2FpdCBsb2FkQXNzZXRCeXRlcyh0ZW1wbGF0ZVBhdGgpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICBgRmFpbGVkIHRvIGxvYWQgdGVtcGxhdGUgJHt0ZW1wbGF0ZUlkfS4gRW5zdXJlIHB1YmxpYyR7dGVtcGxhdGVQYXRofSBleGlzdHMuYFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHBkZkRvYyA9IGF3YWl0IFBERkRvY3VtZW50LmxvYWQodGVtcGxhdGVCeXRlcyk7XHJcblxyXG4gIC8vIOKUgOKUgCAyLiBFbWJlZCBBcmFiaWMgZm9udHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgY29uc3QgZm9udENhY2hlID0gYXdhaXQgbG9hZEZvbnRzKHBkZkRvYyk7XHJcblxyXG4gIC8vIOKUgOKUgCAzLiBBY2Nlc3MgUERGIGZvcm0g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgY29uc3QgZm9ybSA9IHBkZkRvYy5nZXRGb3JtKCk7XHJcblxyXG4gIC8vIOKUgOKUgCA0LiBGaWxsIHRleHQgZmllbGRzICh3aXRoIGZvbnQgKyBjZW50ZXJpbmcpIOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIGZpbGxUZXh0RmllbGRzKFxyXG4gICAgZm9ybSxcclxuICAgIGZvcm1EYXRhIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD4sXHJcbiAgICBmb250Q2FjaGVcclxuICApO1xyXG5cclxuICAvLyDilIDilIAgNS4gRmlsbCBpbWFnZSBmaWVsZHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbiAgLy8gICAgc2V0SW1hZ2UoKSBjcmVhdGVzIEFQIHN0cmVhbXMgZm9yIGJ1dHRvbiBmaWVsZHMuXHJcbiAgLy8gICAgTm8gTmVlZEFwcGVhcmFuY2VzIGZsYWcgaXMgc2V0LCBzbyB0aGUgdmlld2VyIHdpbGwgTk9UXHJcbiAgLy8gICAgcmVnZW5lcmF0ZS9vdmVyd3JpdGUgdGhlc2UgaW1hZ2UgYXBwZWFyYW5jZXMuXHJcbiAgaWYgKGltYWdlcy5sb2dvKSB7XHJcbiAgICBhd2FpdCBmaWxsSW1hZ2VGaWVsZChwZGZEb2MsIGZvcm0sICdDb21wYW55X2xvZ28nLCBpbWFnZXMubG9nbyk7XHJcbiAgfVxyXG4gIGlmIChpbWFnZXMucXIpIHtcclxuICAgIGF3YWl0IGZpbGxJbWFnZUZpZWxkKHBkZkRvYywgZm9ybSwgJ1FSY29kZScsIGltYWdlcy5xcik7XHJcbiAgfVxyXG5cclxuICAvLyDilIDilIAgNi4gU2VyaWFsaXplIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4gIC8vICAgIFRleHQgYXBwZWFyYW5jZXM6IGJ1aWx0IGJ5IGRlZmF1bHRVcGRhdGVBcHBlYXJhbmNlcyhmb250KVxyXG4gIC8vICAgIEltYWdlIGFwcGVhcmFuY2VzOiBidWlsdCBieSBzZXRJbWFnZSgpXHJcbiAgLy8gICAgTm8gdmlld2VyIHJlZ2VuZXJhdGlvbiBuZWVkZWQg4oCUIGV2ZXJ5dGhpbmcgaXMgYmFrZWQgaW4uXHJcbiAgcmV0dXJuIHBkZkRvYy5zYXZlKHsgdXBkYXRlRmllbGRBcHBlYXJhbmNlczogZmFsc2UgfSk7XHJcbn1cclxuXHJcbi8vIOKUgOKUgOKUgCBEZWJ1ZyBVdGlsaXR5IOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLyoqXHJcbiAqIEluc3BlY3QgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGV2ZXJ5IGZvcm0gZmllbGQgbmFtZSArIHR5cGUuXHJcbiAqIFVzZWZ1bCBkdXJpbmcgZGV2ZWxvcG1lbnQgdG8gdmVyaWZ5IGZpZWxkIG5hbWVzIG1hdGNoIHRoZSBzY2hlbWEuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zcGVjdFRlbXBsYXRlRmllbGRzKFxyXG4gIHRlbXBsYXRlSWQ6IG51bWJlclxyXG4pOiBQcm9taXNlPHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfVtdPiB7XHJcbiAgY29uc3QgdGVtcGxhdGVCeXRlcyA9IGF3YWl0IGxvYWRBc3NldEJ5dGVzKFxyXG4gICAgYC90ZW1wbGF0ZXMvdGVtcGxhdGVfJHt0ZW1wbGF0ZUlkfS5wZGZgXHJcbiAgKTtcclxuICBjb25zdCBwZGZEb2MgPSBhd2FpdCBQREZEb2N1bWVudC5sb2FkKHRlbXBsYXRlQnl0ZXMpO1xyXG4gIGNvbnN0IGZvcm0gPSBwZGZEb2MuZ2V0Rm9ybSgpO1xyXG5cclxuICByZXR1cm4gZm9ybS5nZXRGaWVsZHMoKS5tYXAoKGYpID0+ICh7XHJcbiAgICBuYW1lOiBmLmdldE5hbWUoKSxcclxuICAgIHR5cGU6IGYuY29uc3RydWN0b3IubmFtZSxcclxuICB9KSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBERkRvY3VtZW50IiwiVGV4dEFsaWdubWVudCIsImZvbnRraXQiLCJGSUVMRF9TQ0hFTUEiLCJGT05UX1BBVEhTIiwibG9hZEFzc2V0Qnl0ZXMiLCJwdWJsaWNQYXRoIiwicHJvY2VzcyIsInBhdGgiLCJmcyIsImZpbGVQYXRoIiwiam9pbiIsImN3ZCIsImJ1ZmZlciIsInJlYWRGaWxlU3luYyIsInNsaWNlIiwiYnl0ZU9mZnNldCIsImJ5dGVMZW5ndGgiLCJyZXMiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJhcnJheUJ1ZmZlciIsImJhc2U2NFRvVWludDhBcnJheSIsImI2NCIsInJhdyIsImluY2x1ZGVzIiwic3BsaXQiLCJiaW5hcnkiLCJhdG9iIiwiYnl0ZXMiLCJVaW50OEFycmF5IiwibGVuZ3RoIiwiaSIsImNoYXJDb2RlQXQiLCJpc0pwZWciLCJzdGFydHNXaXRoIiwibG9hZEZvbnRzIiwicGRmRG9jIiwicmVnaXN0ZXJGb250a2l0IiwiY2FjaGUiLCJmYW1pbGllcyIsIlNldCIsImZpZWxkIiwidGV4dF9maWVsZHMiLCJhZGQiLCJmb250IiwiZmFtaWx5IiwiZm9udFBhdGgiLCJjb25zb2xlIiwid2FybiIsImZvbnRCeXRlcyIsImVtYmVkZGVkIiwiZW1iZWRGb250Iiwic3Vic2V0IiwiZXJyIiwiZXJyb3IiLCJnZXRUZXh0RmllbGQiLCJmb3JtIiwibmFtZSIsImlzTWl4ZWRCaWRpIiwidGV4dCIsImhhc0FyYWJpYyIsInRlc3QiLCJoYXNEaWdpdHMiLCJwcmVSZXZlcnNlTnVtYmVyU2VnbWVudHMiLCJyZXBsYWNlIiwibWF0Y2giLCJ0cmltbWVkIiwidHJpbSIsInJldmVyc2UiLCJmaWxsVGV4dEZpZWxkcyIsImZvcm1EYXRhIiwiZm9udENhY2hlIiwiZmllbGRTcGVjIiwicmF3VmFsdWUiLCJ1bmRlZmluZWQiLCJwZGZGaWVsZCIsInNldEFsaWdubWVudCIsIkNlbnRlciIsInZhbHVlIiwic2V0VGV4dCIsInNldEZvbnRTaXplIiwiZGVmYXVsdFVwZGF0ZUFwcGVhcmFuY2VzIiwiZmlsbEltYWdlRmllbGQiLCJmaWVsZE5hbWUiLCJpbWFnZUJhc2U2NCIsImJ1dHRvbiIsImdldEJ1dHRvbiIsImltYWdlQnl0ZXMiLCJpbWFnZSIsImVtYmVkSnBnIiwiZW1iZWRQbmciLCJzZXRJbWFnZSIsIlRFTVBMQVRFX0ZJTEVTIiwiZ2VuZXJhdGVCb2FyZCIsIm9wdGlvbnMiLCJ0ZW1wbGF0ZUlkIiwiZm9udE92ZXJyaWRlcyIsImltYWdlcyIsInRlbXBsYXRlUGF0aCIsInRlbXBsYXRlQnl0ZXMiLCJsb2FkIiwiZ2V0Rm9ybSIsImxvZ28iLCJxciIsInNhdmUiLCJ1cGRhdGVGaWVsZEFwcGVhcmFuY2VzIiwiaW5zcGVjdFRlbXBsYXRlRmllbGRzIiwiZ2V0RmllbGRzIiwibWFwIiwiZiIsImdldE5hbWUiLCJ0eXBlIiwiY29uc3RydWN0b3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/pdf-generator.ts\n");

/***/ }),

/***/ "(rsc)/./lib/types.ts":
/*!**********************!*\
  !*** ./lib/types.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALLOWED_FONT_OVERRIDES: () => (/* binding */ ALLOWED_FONT_OVERRIDES),\n/* harmony export */   BOARD_HEIGHT: () => (/* binding */ BOARD_HEIGHT),\n/* harmony export */   BOARD_WIDTH: () => (/* binding */ BOARD_WIDTH),\n/* harmony export */   FIELD_SCHEMA: () => (/* binding */ FIELD_SCHEMA)\n/* harmony export */ });\n/* harmony import */ var _public_schemas_form_fields_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/public/schemas/form_fields_schema.json */ \"(rsc)/./public/schemas/form_fields_schema.json\");\n\n// ─── Schema Constants ────────────────────────────────────────────────\nconst FIELD_SCHEMA = _public_schemas_form_fields_schema_json__WEBPACK_IMPORTED_MODULE_0__;\nconst BOARD_WIDTH = FIELD_SCHEMA.board_info.dimensions.width_pt; // 11338.6\nconst BOARD_HEIGHT = FIELD_SCHEMA.board_info.dimensions.height_pt; // 5669.29\n/** Fields that allow user font-size override (up to 1000pt) */ const ALLOWED_FONT_OVERRIDES = [\n    \"phone\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdHlwZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0U7QUFFbEUsd0VBQXdFO0FBQ2pFLE1BQU1DLGVBQWVELG9FQUFVQSxDQUFDO0FBRWhDLE1BQU1FLGNBQWNELGFBQWFFLFVBQVUsQ0FBQ0MsVUFBVSxDQUFDQyxRQUFRLENBQUMsQ0FBQyxVQUFVO0FBQzNFLE1BQU1DLGVBQWVMLGFBQWFFLFVBQVUsQ0FBQ0MsVUFBVSxDQUFDRyxTQUFTLENBQUMsQ0FBQyxVQUFVO0FBRXBGLDZEQUE2RCxHQUN0RCxNQUFNQyx5QkFBeUI7SUFBQztDQUFRLENBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uYWZldGgtYm9hcmQtZ2VuZXJhdG9yLy4vbGliL3R5cGVzLnRzPzJhNTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNjaGVtYUpTT04gZnJvbSAnQC9wdWJsaWMvc2NoZW1hcy9mb3JtX2ZpZWxkc19zY2hlbWEuanNvbic7XHJcblxyXG4vLyDilIDilIDilIAgU2NoZW1hIENvbnN0YW50cyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuZXhwb3J0IGNvbnN0IEZJRUxEX1NDSEVNQSA9IHNjaGVtYUpTT047XHJcblxyXG5leHBvcnQgY29uc3QgQk9BUkRfV0lEVEggPSBGSUVMRF9TQ0hFTUEuYm9hcmRfaW5mby5kaW1lbnNpb25zLndpZHRoX3B0OyAvLyAxMTMzOC42XHJcbmV4cG9ydCBjb25zdCBCT0FSRF9IRUlHSFQgPSBGSUVMRF9TQ0hFTUEuYm9hcmRfaW5mby5kaW1lbnNpb25zLmhlaWdodF9wdDsgLy8gNTY2OS4yOVxyXG5cclxuLyoqIEZpZWxkcyB0aGF0IGFsbG93IHVzZXIgZm9udC1zaXplIG92ZXJyaWRlICh1cCB0byAxMDAwcHQpICovXHJcbmV4cG9ydCBjb25zdCBBTExPV0VEX0ZPTlRfT1ZFUlJJREVTID0gWydwaG9uZSddIGFzIGNvbnN0O1xyXG5cclxuLy8g4pSA4pSA4pSAIEluZmVycmVkIFR5cGVzIGZyb20gU2NoZW1hIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5cclxuLyoqIEEgc2luZ2xlIHRleHQgZmllbGQgZW50cnkgZnJvbSBmb3JtX2ZpZWxkc19zY2hlbWEuanNvbiAqL1xyXG5leHBvcnQgdHlwZSBUZXh0RmllbGQgPSAodHlwZW9mIHNjaGVtYUpTT04udGV4dF9maWVsZHMpW251bWJlcl07XHJcblxyXG4vKiogQSBzaW5nbGUgaW1hZ2UgZmllbGQgZW50cnkgZnJvbSBmb3JtX2ZpZWxkc19zY2hlbWEuanNvbiAqL1xyXG5leHBvcnQgdHlwZSBJbWFnZUZpZWxkID0gKHR5cGVvZiBzY2hlbWFKU09OLmltYWdlX2ZpZWxkcylbbnVtYmVyXTtcclxuXHJcbi8qKiBVbmlvbiBvZiBhbGwgdGV4dCBmaWVsZCBgbmFtZWAgdmFsdWVzICovXHJcbmV4cG9ydCB0eXBlIFRleHRGaWVsZE5hbWUgPSBUZXh0RmllbGRbJ25hbWUnXTtcclxuXHJcbi8qKiBVbmlvbiBvZiBhbGwgaW1hZ2UgZmllbGQgYG5hbWVgIHZhbHVlcyAqL1xyXG5leHBvcnQgdHlwZSBJbWFnZUZpZWxkTmFtZSA9IEltYWdlRmllbGRbJ25hbWUnXTtcclxuXHJcbi8qKiBVbmlvbiBvZiBmaWVsZCBuYW1lcyB0aGF0IHN1cHBvcnQgZm9udC1zaXplIG92ZXJyaWRlICovXHJcbmV4cG9ydCB0eXBlIEZvbnRPdmVycmlkZUZpZWxkTmFtZSA9ICh0eXBlb2YgQUxMT1dFRF9GT05UX09WRVJSSURFUylbbnVtYmVyXTtcclxuXHJcbi8qKiBGb250IGZhbWlseSBuYW1lcyB1c2VkIGFjcm9zcyB0aGUgc2NoZW1hICovXHJcbmV4cG9ydCB0eXBlIEZvbnRGYW1pbHkgPSBUZXh0RmllbGRbJ2ZvbnQnXVsnZmFtaWx5J107XHJcblxyXG4vLyDilIDilIDilIAgRm9ybSBJbnB1dCBUeXBlcyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbi8qKiBVc2VyLXN1cHBsaWVkIHRleHQgdmFsdWVzIGtleWVkIGJ5IGZpZWxkIG5hbWUgKi9cclxuZXhwb3J0IHR5cGUgQm9hcmRGb3JtRGF0YSA9IHtcclxuICBbSyBpbiBUZXh0RmllbGROYW1lXT86IHN0cmluZztcclxufTtcclxuXHJcbi8qKiBPcHRpb25hbCBmb250LXNpemUgb3ZlcnJpZGVzIChvbmx5IGZvciBhbGxvd2VkIGZpZWxkcykgKi9cclxuZXhwb3J0IHR5cGUgRm9udE92ZXJyaWRlID0ge1xyXG4gIFtLIGluIEZvbnRPdmVycmlkZUZpZWxkTmFtZV0/OiBudW1iZXI7XHJcbn07XHJcblxyXG4vKiogQmFzZTY0LWVuY29kZWQgaW1hZ2UgcGF5bG9hZHMgKi9cclxuZXhwb3J0IGludGVyZmFjZSBCb2FyZEltYWdlcyB7XHJcbiAgLyoqIENvbXBhbnkgbG9nbyBhcyBiYXNlNjQgUE5HL0pQRyAqL1xyXG4gIGxvZ28/OiBzdHJpbmc7XHJcbiAgLyoqIFFSIGNvZGUgYXMgYmFzZTY0IFBORyAqL1xyXG4gIHFyPzogc3RyaW5nO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgUERGIEdlbmVyYXRpb24gT3B0aW9ucyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbi8qKiBGdWxsIHBheWxvYWQgc2VudCB0byB0aGUgUERGIGdlbmVyYXRpb24gQVBJICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdGVCb2FyZE9wdGlvbnMge1xyXG4gIC8qKiBUZW1wbGF0ZSBJRCAoMeKAkzYpICovXHJcbiAgdGVtcGxhdGVJZDogbnVtYmVyO1xyXG4gIC8qKiBUZXh0IGZpZWxkIHZhbHVlcyAqL1xyXG4gIGZvcm1EYXRhOiBCb2FyZEZvcm1EYXRhO1xyXG4gIC8qKiBDdXN0b20gZm9udCBzaXplcyBmb3IgYWxsb3dlZCBmaWVsZHMgKi9cclxuICBmb250T3ZlcnJpZGVzPzogRm9udE92ZXJyaWRlO1xyXG4gIC8qKiBVcGxvYWRlZCAvIGdlbmVyYXRlZCBpbWFnZXMgKi9cclxuICBpbWFnZXM6IEJvYXJkSW1hZ2VzO1xyXG59XHJcblxyXG4vLyDilIDilIDilIAgRm9udCBDYWNoZSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbmltcG9ydCB0eXBlIHsgUERGRm9udCB9IGZyb20gJ3BkZi1saWInO1xyXG5cclxuLyoqIENhY2hlZCBlbWJlZGRlZCBQREYgZm9udHMga2V5ZWQgYnkgZmFtaWx5IG5hbWUgKi9cclxuZXhwb3J0IHR5cGUgRm9udENhY2hlID0ge1xyXG4gIFtLIGluIEZvbnRGYW1pbHldPzogUERGRm9udDtcclxufTtcclxuXHJcbi8vIOKUgOKUgOKUgCBBUEkgUmVzcG9uc2UgVHlwZXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcblxyXG4vKiogVmFsaWRhdGlvbiByZXN1bHQgcmV0dXJuZWQgYnkgdmFsaWRhdGVGb3JtRGF0YSgpICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgdmFsaWQ6IGJvb2xlYW47XHJcbiAgZXJyb3JzOiBzdHJpbmdbXTtcclxufVxyXG5cclxuLyoqIENvbG9yIGRlc2NyaXB0b3IgZnJvbSB0aGUgc2NoZW1hIChSR0IgMOKAkzEgcmFuZ2UpICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRDb2xvciB7XHJcbiAgcjogbnVtYmVyO1xyXG4gIGc6IG51bWJlcjtcclxuICBiOiBudW1iZXI7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG4vKiogUG9zaXRpb24gZGVzY3JpcHRvciBmcm9tIHRoZSBzY2hlbWEgKFBERiBwb2ludHMpICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRQb3NpdGlvbiB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxufVxyXG5cclxuLyoqIFNpemUgZGVzY3JpcHRvciBmcm9tIHRoZSBzY2hlbWEgKi9cclxuZXhwb3J0IGludGVyZmFjZSBGaWVsZFNpemUge1xyXG4gIHdpZHRoX3B0OiBudW1iZXI7XHJcbiAgaGVpZ2h0X3B0OiBudW1iZXI7XHJcbiAgd2lkdGhfY206IG51bWJlcjtcclxuICBoZWlnaHRfY206IG51bWJlcjtcclxufSJdLCJuYW1lcyI6WyJzY2hlbWFKU09OIiwiRklFTERfU0NIRU1BIiwiQk9BUkRfV0lEVEgiLCJib2FyZF9pbmZvIiwiZGltZW5zaW9ucyIsIndpZHRoX3B0IiwiQk9BUkRfSEVJR0hUIiwiaGVpZ2h0X3B0IiwiQUxMT1dFRF9GT05UX09WRVJSSURFUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/types.ts\n");

/***/ }),

/***/ "(rsc)/./lib/validation.ts":
/*!***************************!*\
  !*** ./lib/validation.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   boardFormSchema: () => (/* binding */ boardFormSchema),\n/* harmony export */   fontOverrideSchema: () => (/* binding */ fontOverrideSchema),\n/* harmony export */   imagesSchema: () => (/* binding */ imagesSchema),\n/* harmony export */   textFieldsSchema: () => (/* binding */ textFieldsSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(rsc)/./lib/types.ts\");\n\n\n// ─── Build Zod schema dynamically from form_fields_schema.json ───────\n/** Text field values — required fields are enforced, optional ones default to '' */ const textFieldShape = {};\nfor (const field of _types__WEBPACK_IMPORTED_MODULE_0__.FIELD_SCHEMA.text_fields){\n    if (field.required) {\n        textFieldShape[field.name] = zod__WEBPACK_IMPORTED_MODULE_1__.string({\n            required_error: `${field.label_ar} مطلوب`\n        }).min(1, `${field.label_ar} مطلوب`);\n    } else {\n        textFieldShape[field.name] = zod__WEBPACK_IMPORTED_MODULE_1__.string().optional().default(\"\");\n    }\n}\nconst textFieldsSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object(textFieldShape);\n/** Font-size overrides — only the allowed fields, 50–800pt */ const fontOverrideShape = {};\nfor (const name of _types__WEBPACK_IMPORTED_MODULE_0__.ALLOWED_FONT_OVERRIDES){\n    fontOverrideShape[name] = zod__WEBPACK_IMPORTED_MODULE_1__.number().min(50, \"الحد الأدنى 50\").max(1000, \"الحد الأقصى 1000\").optional();\n}\nconst fontOverrideSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object(fontOverrideShape);\n/** Image payloads — logo required, QR generated automatically */ const imagesSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    logo: zod__WEBPACK_IMPORTED_MODULE_1__.string({\n        required_error: \"شعار الشركة مطلوب\"\n    }).min(1, \"شعار الشركة مطلوب\"),\n    qr: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional().default(\"\")\n});\n/** Full form payload */ const boardFormSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    templateId: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().min(1, \"اختر قالبًا\").max(1, \"القالب غير صالح\"),\n    formData: textFieldsSchema,\n    fontOverrides: fontOverrideSchema.optional(),\n    images: imagesSchema\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdmFsaWRhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0I7QUFDdUM7QUFFL0Qsd0VBQXdFO0FBRXhFLGtGQUFrRixHQUNsRixNQUFNRyxpQkFBK0MsQ0FBQztBQUV0RCxLQUFLLE1BQU1DLFNBQVNILGdEQUFZQSxDQUFDSSxXQUFXLENBQUU7SUFDNUMsSUFBSUQsTUFBTUUsUUFBUSxFQUFFO1FBQ2xCSCxjQUFjLENBQUNDLE1BQU1HLElBQUksQ0FBQyxHQUFHUCx1Q0FDcEIsQ0FBQztZQUFFUyxnQkFBZ0IsQ0FBQyxFQUFFTCxNQUFNTSxRQUFRLENBQUMsTUFBTSxDQUFDO1FBQUMsR0FDbkRDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRVAsTUFBTU0sUUFBUSxDQUFDLE1BQU0sQ0FBQztJQUNyQyxPQUFPO1FBQ0xQLGNBQWMsQ0FBQ0MsTUFBTUcsSUFBSSxDQUFDLEdBQUdQLHVDQUFRLEdBQUdZLFFBQVEsR0FBR0MsT0FBTyxDQUFDO0lBQzdEO0FBQ0Y7QUFFTyxNQUFNQyxtQkFBbUJkLHVDQUFRLENBQUNHLGdCQUFnQjtBQUV6RCw0REFBNEQsR0FDNUQsTUFBTWEsb0JBQWtELENBQUM7QUFFekQsS0FBSyxNQUFNVCxRQUFRTCwwREFBc0JBLENBQUU7SUFDekNjLGlCQUFpQixDQUFDVCxLQUFLLEdBQUdQLHVDQUNqQixHQUNOVyxHQUFHLENBQUMsSUFBSSxrQkFDUk8sR0FBRyxDQUFDLE1BQU0sb0JBQ1ZOLFFBQVE7QUFDYjtBQUVPLE1BQU1PLHFCQUFxQm5CLHVDQUFRLENBQUNnQixtQkFBbUI7QUFFOUQsK0RBQStELEdBQ3hELE1BQU1JLGVBQWVwQix1Q0FBUSxDQUFDO0lBQ25DcUIsTUFBTXJCLHVDQUNHLENBQUM7UUFBRVMsZ0JBQWdCO0lBQW9CLEdBQzdDRSxHQUFHLENBQUMsR0FBRztJQUNWVyxJQUFJdEIsdUNBQVEsR0FBR1ksUUFBUSxHQUFHQyxPQUFPLENBQUM7QUFDcEMsR0FBRztBQUVILHNCQUFzQixHQUNmLE1BQU1VLGtCQUFrQnZCLHVDQUFRLENBQUM7SUFDdEN3QixZQUFZeEIsdUNBQ0gsR0FDTnlCLEdBQUcsR0FDSGQsR0FBRyxDQUFDLEdBQUcsZUFDUE8sR0FBRyxDQUFDLEdBQUc7SUFDVlEsVUFBVVo7SUFDVmEsZUFBZVIsbUJBQW1CUCxRQUFRO0lBQzFDZ0IsUUFBUVI7QUFDVixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmFmZXRoLWJvYXJkLWdlbmVyYXRvci8uL2xpYi92YWxpZGF0aW9uLnRzPzUwYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCB7IEZJRUxEX1NDSEVNQSwgQUxMT1dFRF9GT05UX09WRVJSSURFUyB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLy8g4pSA4pSA4pSAIEJ1aWxkIFpvZCBzY2hlbWEgZHluYW1pY2FsbHkgZnJvbSBmb3JtX2ZpZWxkc19zY2hlbWEuanNvbiDilIDilIDilIDilIDilIDilIDilIBcclxuXHJcbi8qKiBUZXh0IGZpZWxkIHZhbHVlcyDigJQgcmVxdWlyZWQgZmllbGRzIGFyZSBlbmZvcmNlZCwgb3B0aW9uYWwgb25lcyBkZWZhdWx0IHRvICcnICovXHJcbmNvbnN0IHRleHRGaWVsZFNoYXBlOiBSZWNvcmQ8c3RyaW5nLCB6LlpvZFR5cGVBbnk+ID0ge307XHJcblxyXG5mb3IgKGNvbnN0IGZpZWxkIG9mIEZJRUxEX1NDSEVNQS50ZXh0X2ZpZWxkcykge1xyXG4gIGlmIChmaWVsZC5yZXF1aXJlZCkge1xyXG4gICAgdGV4dEZpZWxkU2hhcGVbZmllbGQubmFtZV0gPSB6XHJcbiAgICAgIC5zdHJpbmcoeyByZXF1aXJlZF9lcnJvcjogYCR7ZmllbGQubGFiZWxfYXJ9INmF2LfZhNmI2KhgIH0pXHJcbiAgICAgIC5taW4oMSwgYCR7ZmllbGQubGFiZWxfYXJ9INmF2LfZhNmI2KhgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGV4dEZpZWxkU2hhcGVbZmllbGQubmFtZV0gPSB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVmYXVsdCgnJyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdGV4dEZpZWxkc1NjaGVtYSA9IHoub2JqZWN0KHRleHRGaWVsZFNoYXBlKTtcclxuXHJcbi8qKiBGb250LXNpemUgb3ZlcnJpZGVzIOKAlCBvbmx5IHRoZSBhbGxvd2VkIGZpZWxkcywgNTDigJM4MDBwdCAqL1xyXG5jb25zdCBmb250T3ZlcnJpZGVTaGFwZTogUmVjb3JkPHN0cmluZywgei5ab2RUeXBlQW55PiA9IHt9O1xyXG5cclxuZm9yIChjb25zdCBuYW1lIG9mIEFMTE9XRURfRk9OVF9PVkVSUklERVMpIHtcclxuICBmb250T3ZlcnJpZGVTaGFwZVtuYW1lXSA9IHpcclxuICAgIC5udW1iZXIoKVxyXG4gICAgLm1pbig1MCwgJ9in2YTYrdivINin2YTYo9iv2YbZiSA1MCcpXHJcbiAgICAubWF4KDEwMDAsICfYp9mE2K3YryDYp9mE2KPZgti12YkgMTAwMCcpXHJcbiAgICAub3B0aW9uYWwoKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZvbnRPdmVycmlkZVNjaGVtYSA9IHoub2JqZWN0KGZvbnRPdmVycmlkZVNoYXBlKTtcclxuXHJcbi8qKiBJbWFnZSBwYXlsb2FkcyDigJQgbG9nbyByZXF1aXJlZCwgUVIgZ2VuZXJhdGVkIGF1dG9tYXRpY2FsbHkgKi9cclxuZXhwb3J0IGNvbnN0IGltYWdlc1NjaGVtYSA9IHoub2JqZWN0KHtcclxuICBsb2dvOiB6XHJcbiAgICAuc3RyaW5nKHsgcmVxdWlyZWRfZXJyb3I6ICfYtNi52KfYsSDYp9mE2LTYsdmD2Kkg2YXYt9mE2YjYqCcgfSlcclxuICAgIC5taW4oMSwgJ9i02LnYp9ixINin2YTYtNix2YPYqSDZhdi32YTZiNioJyksXHJcbiAgcXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5kZWZhdWx0KCcnKSxcclxufSk7XHJcblxyXG4vKiogRnVsbCBmb3JtIHBheWxvYWQgKi9cclxuZXhwb3J0IGNvbnN0IGJvYXJkRm9ybVNjaGVtYSA9IHoub2JqZWN0KHtcclxuICB0ZW1wbGF0ZUlkOiB6XHJcbiAgICAubnVtYmVyKClcclxuICAgIC5pbnQoKVxyXG4gICAgLm1pbigxLCAn2KfYrtiq2LEg2YLYp9mE2KjZi9inJylcclxuICAgIC5tYXgoMSwgJ9in2YTZgtin2YTYqCDYutmK2LEg2LXYp9mE2K0nKSxcclxuICBmb3JtRGF0YTogdGV4dEZpZWxkc1NjaGVtYSxcclxuICBmb250T3ZlcnJpZGVzOiBmb250T3ZlcnJpZGVTY2hlbWEub3B0aW9uYWwoKSxcclxuICBpbWFnZXM6IGltYWdlc1NjaGVtYSxcclxufSk7XHJcblxyXG5leHBvcnQgdHlwZSBCb2FyZEZvcm1WYWx1ZXMgPSB6LmluZmVyPHR5cGVvZiBib2FyZEZvcm1TY2hlbWE+O1xyXG4iXSwibmFtZXMiOlsieiIsIkZJRUxEX1NDSEVNQSIsIkFMTE9XRURfRk9OVF9PVkVSUklERVMiLCJ0ZXh0RmllbGRTaGFwZSIsImZpZWxkIiwidGV4dF9maWVsZHMiLCJyZXF1aXJlZCIsIm5hbWUiLCJzdHJpbmciLCJyZXF1aXJlZF9lcnJvciIsImxhYmVsX2FyIiwibWluIiwib3B0aW9uYWwiLCJkZWZhdWx0IiwidGV4dEZpZWxkc1NjaGVtYSIsIm9iamVjdCIsImZvbnRPdmVycmlkZVNoYXBlIiwibnVtYmVyIiwibWF4IiwiZm9udE92ZXJyaWRlU2NoZW1hIiwiaW1hZ2VzU2NoZW1hIiwibG9nbyIsInFyIiwiYm9hcmRGb3JtU2NoZW1hIiwidGVtcGxhdGVJZCIsImludCIsImZvcm1EYXRhIiwiZm9udE92ZXJyaWRlcyIsImltYWdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/validation.ts\n");

/***/ }),

/***/ "(rsc)/./public/schemas/form_fields_schema.json":
/*!************************************************!*\
  !*** ./public/schemas/form_fields_schema.json ***!
  \************************************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"board_info":{"dimensions":{"width_m":4,"height_m":2,"width_cm":400,"height_cm":200,"width_pt":11338.6,"height_pt":5669.29},"description":"لوحة إعلانية لمزادات إنفاذ"},"text_fields":[{"id":1,"name":"Start_day","label_ar":"تاريخ البداية","label_en":"Start Date","type":"text","position":{"x":9127.21,"y":3165.2},"size":{"width_pt":1520.99,"height_pt":416.47,"width_cm":53.6,"height_cm":14.7},"font":{"family":"LamaSans-Medium","size":94},"color":{"r":1,"g":1,"b":1,"name":"white"},"location":"top_right","importance":"medium","required":true},{"id":2,"name":"End_day","label_ar":"تاريخ النهاية","label_en":"End Date","type":"text","position":{"x":9127.21,"y":2746.45},"size":{"width_pt":1525.29,"height_pt":404.24,"width_cm":53.8,"height_cm":14.3},"font":{"family":"LamaSans-Medium","size":94},"color":{"r":1,"g":1,"b":1,"name":"white"},"location":"top_right","importance":"medium","required":true},{"id":15,"name":"Start_hour","label_ar":"ساعة البداية","label_en":"Start Hour","type":"text","position":{"x":9127.21,"y":3165.2},"size":{"width_pt":1520.99,"height_pt":416.47,"width_cm":53.6,"height_cm":14.7},"font":{"family":"LamaSans-Medium","size":94},"color":{"r":1,"g":1,"b":1,"name":"white"},"location":"top_right","importance":"medium","required":true},{"id":16,"name":"End_hour","label_ar":"ساعة النهاية","label_en":"End Hour","type":"text","position":{"x":9127.21,"y":2746.45},"size":{"width_pt":1525.29,"height_pt":404.24,"width_cm":53.8,"height_cm":14.3},"font":{"family":"LamaSans-Medium","size":94},"color":{"r":1,"g":1,"b":1,"name":"white"},"location":"top_right","importance":"medium","required":true},{"id":3,"name":"Provider","label_ar":"مقدم الخدمة","label_en":"Service Provider","type":"text","position":{"x":9127.21,"y":2217.59},"size":{"width_pt":1520.99,"height_pt":435.66,"width_cm":53.6,"height_cm":15.4},"font":{"family":"LamaSans-Medium","size":94},"color":{"r":1,"g":1,"b":1,"name":"white"},"location":"right_upper","importance":"medium","required":true},{"id":4,"name":"Auction_name","label_ar":"اسم المزاد","label_en":"Auction Name","type":"text","position":{"x":9133.26,"y":903.9},"size":{"width_pt":1496.34,"height_pt":939,"width_cm":52.8,"height_cm":33.1},"font":{"family":"RuaqArabic-Medium","size":278},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"right_center","importance":"critical","required":true,"notes":"الحقل الرئيسي - أكبر حجم بعد نوع العقار"},{"id":5,"name":"License_number","label_ar":"رقم الترخيص","label_en":"License Number","type":"text","position":{"x":5720.95,"y":1104.65},"size":{"width_pt":1506.17,"height_pt":566.56,"width_cm":53.1,"height_cm":20},"font":{"family":"LamaSans-Medium","size":213},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"center","importance":"high","required":true},{"id":6,"name":"Type","label_ar":"نوع العقار","label_en":"Property Type","type":"text","position":{"x":738.13,"y":2119.3},"size":{"width_pt":2322.81,"height_pt":787.63,"width_cm":81.9,"height_cm":27.8},"font":{"family":"RuaqArabic-Medium","size":300},"color":{"r":1,"g":1,"b":1,"name":"white"},"location":"left_upper","importance":"critical","required":true,"notes":"أكبر حقل نصي - الأكثر بروزاً"},{"id":7,"name":"Court_number","label_ar":"رقم المحكمة","label_en":"Court Number","type":"text","position":{"x":215.5,"y":87.52},"size":{"width_pt":1727.04,"height_pt":303.7,"width_cm":60.9,"height_cm":10.7},"font":{"family":"LamaSans-Medium","size":160},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"bottom_row","importance":"low","required":false,"notes":"جزء من الصف السفلي للتفاصيل"},{"id":8,"name":"Sakk_number","label_ar":"رقم الصك","label_en":"Deed Number","type":"text","position":{"x":2089.23,"y":87.52},"size":{"width_pt":1146.73,"height_pt":303.7,"width_cm":40.5,"height_cm":10.7},"font":{"family":"LamaSans-Medium","size":160},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"bottom_row","importance":"low","required":false},{"id":9,"name":"Land_number","label_ar":"رقم الأرض","label_en":"Land Number","type":"text","position":{"x":3471.59,"y":87.52},"size":{"width_pt":1157.39,"height_pt":298.55,"width_cm":40.8,"height_cm":10.5},"font":{"family":"LamaSans-Medium","size":180},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"bottom_row","importance":"low","required":false},{"id":10,"name":"Plan_number","label_ar":"رقم المخطط","label_en":"Plan Number","type":"text","position":{"x":4901.06,"y":87.52},"size":{"width_pt":1146.73,"height_pt":303.7,"width_cm":40.5,"height_cm":10.7},"font":{"family":"RuaqArabic-Medium","size":213},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"bottom_row","importance":"low","required":false},{"id":11,"name":"Area","label_ar":"المساحة","label_en":"Area","type":"text","position":{"x":6288.65,"y":87.52},"size":{"width_pt":1146.72,"height_pt":303.7,"width_cm":40.5,"height_cm":10.7},"font":{"family":"LamaSans-Medium","size":180},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"bottom_row","importance":"medium","required":true},{"id":12,"name":"Usage","label_ar":"الاستخدام","label_en":"Usage","type":"text","position":{"x":7618.64,"y":87.52},"size":{"width_pt":1136.25,"height_pt":301.83,"width_cm":40.1,"height_cm":10.7},"font":{"family":"RuaqArabic-Medium","size":213},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"bottom_row","importance":"medium","required":false},{"id":13,"name":"District","label_ar":"الحي","label_en":"District","type":"text","position":{"x":8846.84,"y":90.04},"size":{"width_pt":1560.26,"height_pt":306.57,"width_cm":55.1,"height_cm":10.8},"font":{"family":"RuaqArabic-Medium","size":213},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"bottom_row","importance":"medium","required":true},{"id":14,"name":"phone","label_ar":"رقم الهاتف","label_en":"Phone Number","type":"text","position":{"x":582.97,"y":906.03},"size":{"width_pt":4707.81,"height_pt":837.9,"width_cm":166.1,"height_cm":29.6},"font":{"family":"LamaSans-Medium","size":12},"color":{"r":0.082,"g":0.105,"b":0.266,"name":"dark_blue"},"location":"left_center","importance":"high","required":true,"notes":"أطول حقل - لكن بخط صغير"}],"image_fields":[{"id":17,"name":"Company_logo","label_ar":"شعار الشركة","label_en":"Company Logo","type":"image","position":{"x":7549.7,"y":833.87},"size":{"width_pt":1354.87,"height_pt":823.54,"width_cm":47.8,"height_cm":29.1},"location":"right_center","importance":"high","required":true,"accepted_formats":["png","jpg","jpeg","svg"],"notes":"شعار الشركة/المكتب المنفذ"},{"id":18,"name":"QRcode","label_ar":"رمز QR","label_en":"QR Code","type":"image","position":{"x":334.3,"y":3430.73},"size":{"width_pt":1611.65,"height_pt":1539.39,"width_cm":56.9,"height_cm":54.3},"location":"top_left","importance":"high","required":true,"accepted_formats":["png","svg"],"notes":"رمز QR للربط بصفحة المزاد في منصة إنفاذ"}],"field_groups":{"essential":["Type","Auction_name","Start_day","End_day","Start_hour","End_hour","Area","District","phone","Company_logo","QRcode"],"property_details":["Court_number","Sakk_number","Land_number","Plan_number","Area","Usage","District"],"auction_info":["Auction_name","Start_day","End_day","Start_hour","End_hour","Provider","License_number"],"branding":["Company_logo","phone"],"digital":["QRcode"]},"fonts_used":[{"name":"LamaSans-Medium","usage_count":9,"fields":["Start_day","End_day","Start_hour","End_hour","Provider","Court_number","Sakk_number","Land_number","Area","phone"]},{"name":"RuaqArabic-Medium","usage_count":5,"fields":["Auction_name","Plan_number","Usage","Type","District"]}]}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/pdf-lib","vendor-chunks/@pdf-lib","vendor-chunks/pako"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-pdf%2Froute&page=%2Fapi%2Fgenerate-pdf%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-pdf%2Froute.ts&appDir=K%3A%5CinfathPlats%5CinfathPlats%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=K%3A%5CinfathPlats%5CinfathPlats&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();